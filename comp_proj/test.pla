include "pla_lib/std/io.pla"a;

function buf_io_test : $() -> void {
	variable ch : u16;

	while true {
		ch = 0'u16;

		while ch != 10'u16 {
			ch = std::read_con_ch();
			
			std::write_con_ch(ch);
		}
	}
}

function main : $() -> s32 {
	std::init_con_io();

	variable int_val : s32;

	while true {
		if !std::read_con_dec(4'u8, true, &int_val) {
			return -1's32;
		}

		if !std::write_con_dec(&int_val, 4'u8, true) {
			return -1's32;
		}

		std::write_con_ch(10'u16);
	}

	return 0's32;
}