include "pla_lib/std/io.pla"a;

function buf_io_test : $() -> void {
	variable ch : u16;

	while true {
		ch = 0'u16;

		while ch != 10'u16 {
			ch = std::read_con_ch();
			
			std::write_con_ch(ch);
		}
	}
}

function main : $() -> s32 {
	std::init_con_io();

	variable a : s32, b : s32;

	while:loop true {
		if !std::read_con_dec(4'u8, true, &a) {
			return -1's32;
		}

		if !std::read_con_dec(4'u8, true, &b) {
			return -1's32;
		}

		variable res := a + b;

		if !std::write_con_dec(&res, 4'u8, true) {
			return -1's32;
		}

		std::write_con_ch(32'u16);

		res = a - b;

		if !std::write_con_dec(&res, 4'u8, true) {
			return -1's32;
		}

		std::write_con_ch(10'u16);

		if a == b {
			break loop;
		}
	}

	return 0's32;
}